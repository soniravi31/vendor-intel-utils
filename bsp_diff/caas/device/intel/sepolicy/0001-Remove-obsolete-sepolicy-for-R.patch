From a032e8912e2deb2caaacaaa642f07c58e4cde7f8 Mon Sep 17 00:00:00 2001
From: Qiming Shi <qiming.shi@intel.com>
Date: Thu, 26 Mar 2020 23:02:33 -0700
Subject: Remove obsolete sepolicy for R

Tracked-On:
Signed-off-by: Qiming Shi <qiming.shi@intel.com>
---
 aafd/aafd.te               | 4 ++--
 kernel/domain.te           | 2 --
 power/hal_power_service.te | 4 ----
 3 files changed, 2 insertions(+), 8 deletions(-)

diff --git a/aafd/aafd.te b/aafd/aafd.te
index 5ed9389..ed74bc9 100644
--- a/aafd/aafd.te
+++ b/aafd/aafd.te
@@ -16,8 +16,8 @@ allow aafd sysfs_devices_system_cpu:file w_file_perms;
 allow aafd sysfs_dm:dir r_dir_perms;
 allow aafd sysfs_dm:file w_file_perms;
 allow aafd sysfs_dt_firmware_android:dir r_dir_perms;
-allow aafd sysfs_health2_0_management:dir r_dir_perms;
-allow aafd sysfs_health2_0_management:file w_file_perms;
+#allow aafd sysfs_health2_0_management:dir r_dir_perms;
+#allow aafd sysfs_health2_0_management:file w_file_perms;
 allow aafd sysfs_hwrandom:dir r_dir_perms;
 allow aafd sysfs_hwrandom:file w_file_perms;
 allow aafd sysfs_loop:dir r_dir_perms;
diff --git a/kernel/domain.te b/kernel/domain.te
index 4d1a52d..6e95778 100644
--- a/kernel/domain.te
+++ b/kernel/domain.te
@@ -3,10 +3,8 @@ dontaudit {
 	dumpstate
 	init
 	installd
-	install_recovery
 	lmkd
 	netd
-	perfprofd
 	recovery
 	sdcardd
 	tee
diff --git a/power/hal_power_service.te b/power/hal_power_service.te
index b2e8f7a..cb9c8f2 100644
--- a/power/hal_power_service.te
+++ b/power/hal_power_service.te
@@ -1,8 +1,4 @@
-type hal_power_service, domain;
-hal_server_domain(hal_power_service, hal_power)
-
 type hal_power_service_exec, exec_type, vendor_file_type, file_type;
-init_daemon_domain(hal_power_service)
 
 allow hal_power_service cgroup:file rw_file_perms;
 allow hal_power_service sysfs_devices_system_cpu:file rw_file_perms;
-- 
2.24.0

